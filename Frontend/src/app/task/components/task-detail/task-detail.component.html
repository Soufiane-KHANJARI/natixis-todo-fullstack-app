<div class="app-container">

  <header class="app-header">
    <div class="header-content">
      <div class="header-title">
        <h1>NatixTask</h1>
      </div>
      <p class="header-subtitle">Transformer les tâches en succès !</p>
    </div>
  </header>


  <main class="main-content">
    <div class="content-card">
      @if (task()) {

      <div class="detail-header">
        <button class="btn-back" (click)="goBack()">
          <mat-icon>arrow_back</mat-icon>
          Retour
        </button>
        <button class="btn-edit" (click)="openEditDialog()">
          <mat-icon>edit</mat-icon>
          Modifier
        </button>
      </div>


      <div class="detail-content">

        <div class="status-badge" [class.completed]="task()?.completed">
          <mat-icon>{{ task()?.completed ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
          {{ task()?.completed ? 'Terminée' : 'En cours' }}
        </div>


        <h2 class="task-title">{{ task()?.label }}</h2>


        <div class="detail-section">
          <h3>DESCRIPTION</h3>
          <div class="description-box">
            <p>{{ task()?.description }}</p>
          </div>
        </div>


        <div class="detail-section">
          <h3>INFORMATIONS</h3>
          <table class="info-table">
            <tbody>
              <tr>
                <td class="info-label">ID DE LA TÂCHE</td>
                <td class="info-label">STATUT</td>
              </tr>
              <tr>
                <td class="info-value">{{ task()?.id }}</td>
                <td class="info-value">{{ task()?.completed ? 'Terminée' : 'En cours' }}</td>
              </tr>
            </tbody>
          </table>
        </div>


        <div class="detail-actions">
          @if (!task()?.completed) {
          <button class="btn-complete" (click)="toggleTaskStatus()">
            <mat-icon>check</mat-icon>
            Marquer comme terminée
          </button>
          } @else {
          <button class="btn-complete" (click)="toggleTaskStatus()">
            <mat-icon>radio_button_unchecked</mat-icon>
            Marquer comme en cours
          </button>
          }
          <button class="btn-delete" (click)="deleteTask()">
            <mat-icon>delete</mat-icon>
            Supprimer la tâche
          </button>
        </div>
      </div>
      } @else {
      <div class="loading">
        <p>Chargement...</p>
      </div>
      }
    </div>
  </main>
</div>